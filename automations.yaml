- id: backyard_lights_on_when_back_door_open
  alias: "Evening Back Yard Lights When Door Opened"
  trigger:
    platform: state
    entity_id: binary_sensor.back_door
    to: 'true'
  condition:
    condition: sun
    after: sunset
    after_offset: "-01:00:00"
  action:
    service: homeassistant.turn_on
    entity_id: scene.backyard_lights_evening_on

- id: backyard_lights_vacancy_off
  alias: "Back Yard Lights Off When Movement Stopped"
  trigger:
    platform: state
    entity_id: binary_sensor.deck_motion
    to: 'off'
    for:
      minutes: 5
  action:
    service: scene.turn_on
    entity_id: scene.backyard_lights_off

- id: heidi_heater_thermostat_off
  alias: "Heidi Heater Thermostat Off"
  trigger:
    platform: numeric_state
    entity_id: sensor.heidi_multisensor_temperature
    above: 72.0
    for:
      minutes: 5
  action:
    service: homeassistant.turn_off
    entity_id: switch.heidi_heater
    
- id: heidi_heater_thermostat_on
  alias: "Heidi Heater Thermostat On"
  trigger:
    platform: numeric_state
    entity_id: sensor.heidi_multisensor_temperature
    below: 70.0
    for:
      minutes: 5
  action:
    service: homeassistant.turn_on
    entity_id: switch.heidi_heater

- id: mirror_bedtime_input_boolean_on
  alias: "Mirror House Bedtime On to Input Boolean"
  trigger:
    platform: state
    entity_id: binary_sensor.bedtime
    to: 'on'
  action:
    service: input_boolean.turn_on
    data:
      entity_id: input_boolean.bedtime

- id: mirror_bedtime_input_boolean_off
  alias: "Mirror House Bedtime Off to Input Boolean"
  trigger:
    platform: state
    entity_id: binary_sensor.bedtime
    to: 'off'
  action:
    service: input_boolean.turn_off
    data:
      entity_id: input_boolean.bedtime

#- id: set_up_dimmed_lights_at_bedtime
#  alias: "Set Up Dimmed Lights at Bedtime"
#  trigger:
#    platform: state
#    entity_id: binary_sensor.bedtime
#    to: 'on'
#  action:
#    service: script.turn_on
#    entity_id: script.prepare_for_bedtime


#- id: reset_dimmed_bedtime_lights_in_morning
#  alias: "Reset Dimmed Bedtime Lights in the Morning"
#  trigger:
#    platform: state
#    entity_id: binary_sensor.bedtime
#    to: 'off'
#  action:
#    service: script.turn_on
#    entity_id: script.prepare_for_daytime

- id: noah_lights_off_at_bedtime
  alias: "Turn Noah Lights Off at Bedtime"
  trigger:
    - platform: time
      at: '20:00:00'
  condition:
    condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  action:
    service: light.turn_off
    entity_id: light.noah
